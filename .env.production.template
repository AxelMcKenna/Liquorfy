# ============================================================================
# LIQUORFY PRODUCTION ENVIRONMENT CONFIGURATION
# ============================================================================
#
# SECURITY CRITICAL: This file contains sensitive credentials
# - NEVER commit this file to version control
# - Store securely using secrets management (AWS Secrets Manager, HashiCorp Vault, etc.)
# - Use strong, randomly generated passwords for all credentials
# - Rotate credentials regularly
#
# To generate secure secrets, use:
#   openssl rand -base64 32
#   python -c "import secrets; print(secrets.token_urlsafe(32))"
#
# ============================================================================

# ----------------------------------------------------------------------------
# Application Settings
# ----------------------------------------------------------------------------
ENVIRONMENT=production
LOG_LEVEL=INFO

# SECRET_KEY: Used for JWT tokens, sessions, and cryptographic operations
# CRITICAL: Must be at least 32 characters, random, and kept secret
# Generate with: openssl rand -base64 32
SECRET_KEY=

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------
# PostgreSQL credentials
# SECURITY: Use strong passwords (min 16 chars, mixed case, numbers, symbols)
POSTGRES_USER=
POSTGRES_PASSWORD=
POSTGRES_DB=liquorfy

# Full database URL (auto-constructed in docker-compose, but can override)
# Format: postgresql://user:password@host:port/database
# DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@db:5432/${POSTGRES_DB}
# Supabase (direct connection, recommended for OCI VM / long-lived API)
# DATABASE_URL=<paste Supabase direct connection string>?sslmode=require
# Supabase (pooler/transaction mode, recommended for serverless)
# DATABASE_URL=<paste Supabase pooler connection string>?sslmode=require&pgbouncer=true

# ----------------------------------------------------------------------------
# Redis Configuration
# ----------------------------------------------------------------------------
# Redis password for cache and session storage
# SECURITY: Use strong password (min 16 chars)
REDIS_PASSWORD=

# Full Redis URL (auto-constructed in docker-compose, but can override)
# Format: redis://:password@host:port/db
# REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0

# ----------------------------------------------------------------------------
# Admin User
# ----------------------------------------------------------------------------
# Initial admin account credentials
# SECURITY: Change these immediately after first login
ADMIN_USERNAME=admin
ADMIN_PASSWORD=

# ----------------------------------------------------------------------------
# Web Server
# ----------------------------------------------------------------------------
# Port to expose the web application on the host
WEB_PORT=80

# ----------------------------------------------------------------------------
# API Configuration
# ----------------------------------------------------------------------------
# CORS allowed origins (comma-separated)
# Production should list specific domains only
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# API rate limiting
RATE_LIMIT_PER_MINUTE=60

# ----------------------------------------------------------------------------
# External Services (Optional)
# ----------------------------------------------------------------------------
# Mapbox API key for maps (if using Mapbox)
# MAPBOX_API_KEY=

# Sentry DSN for error tracking (if using Sentry)
# SENTRY_DSN=

# ----------------------------------------------------------------------------
# SSL/TLS Configuration (if not using reverse proxy)
# ----------------------------------------------------------------------------
# SSL_CERT_PATH=/path/to/cert.pem
# SSL_KEY_PATH=/path/to/key.pem

# ----------------------------------------------------------------------------
# Backup Configuration
# ----------------------------------------------------------------------------
# BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
# BACKUP_RETENTION_DAYS=30

# ============================================================================
# DEPLOYMENT CHECKLIST
# ============================================================================
#
# Before deploying to production:
#
# [ ] Generate and set strong SECRET_KEY (min 32 chars)
# [ ] Set strong POSTGRES_PASSWORD (min 16 chars)
# [ ] Set strong REDIS_PASSWORD (min 16 chars)
# [ ] Change ADMIN_PASSWORD from default
# [ ] Configure CORS_ORIGINS with actual domain(s)
# [ ] Set up SSL/TLS certificates (via reverse proxy or direct)
# [ ] Configure firewall rules (only expose ports 80/443)
# [ ] Set up database backups
# [ ] Configure monitoring and alerting
# [ ] Set up log aggregation
# [ ] Test disaster recovery procedures
# [ ] Document runbook for operations team
#
# ============================================================================
